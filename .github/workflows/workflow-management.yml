name: Workflow Management

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  cancel-previous:
    name: Cancel Previous Runs
    runs-on: ubuntu-latest
    steps:
    - name: Cancel Previous Runs
      uses: styfle/cancel-workflow-action@0.12.1
      with:
        # Cancel all workflows for this branch/PR, not just the current workflow
        all_but_latest: true
        # Use the GitHub token for authentication
        access_token: ${{ github.token }}
        # Cancel workflows for the same event (push/pull_request)
        ignore_sha: false
    
    - name: Workflow Summary
      run: |
        echo "=== Workflow Management Summary ==="
        echo "âœ… Previous workflow runs cancelled for optimization"
        echo "ðŸ”„ Current workflow: ${{ github.workflow }}"
        echo "ðŸŒŸ Branch/Ref: ${{ github.ref }}"
        echo "âš¡ Event: ${{ github.event_name }}"
        if [ "${{ github.event_name }}" == "pull_request" ]; then
          echo "ðŸ“‹ PR #${{ github.event.number }}: ${{ github.event.pull_request.title }}"
        fi
        echo "ðŸ’¡ This helps reduce CI resource usage and queue times"
